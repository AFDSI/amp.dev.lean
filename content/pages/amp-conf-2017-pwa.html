---
$view: /views/blank.html
$title: AMP Conf 2017
noglobalnote: 1
manifest: manifest-amp-conf.json
noheader: 1
class: amp-conf amp-conf-pwa

components:
  - iframe
stylesheet: pages/amp-conf.css
---

<!DOCTYPE html>
<html ‚ö° {% if doc.locale.is_rtl %} dir="rtl" lang="ar"{% else %}lang="{{doc.locale}}"{% endif %}>
{% include "/views/partials/head.html" %}

<body class="{{doc.class}}{% if doc.locale.is_rtl %} rtl{% endif %}">

<amp-analytics type="googleanalytics" id="analytics-ga">
<script type="application/json">
{
    "vars": {
    "account": "UA-67833617-1"
    },
    "triggers": {
    "trackPageview": {
        "on": "visible",
        "request": "pageview"
    }
    }
}
</script>
</amp-analytics>



{% set conf = g.doc('/content/includes/amp-conf-2017.yaml', locale=doc.locale) %}

<section class="description amp-conf-section">

    <ul>
        <li data-page="livestream" tabindex="0" class="active"><a>Live</a></li>
        <li data-page="schedule" tabindex="0"><a>Schedule</a></li>
        <li data-page="speakers" tabindex="0"><a>Speakers</a></li>
        <li data-page="location" tabindex="0"><a>üìç</a></li>
        <li data-page="faq" tabindex="0"><a>?</a></li>
    </ul>

</section>

<section class="livestream amp-conf-section amp-conf-page active">
    <div class="wrapper">
        <h3 id="schedule">Currently live</h3>

        <amp-youtube
            data-videoid="ZTGxX0V-pt0"
            layout="responsive"
            width="480" height="270"></amp-youtube>

        <div class="session">

            <div class="currently">On right now (<span id="livestream-now-minutes" class="minutes">10</span> minutes remaining):</div>

            <h5 id="livestream-now-title">Title</h5>
            <small id="livestream-now-speaker"><a href="#">Speaker Name, Company</a></small>

            <div class="nextup">Upcoming:</div>

            <h5 id="livestream-next-title" class="next">Title</h5>
            <small id="livestream-next-speaker" class="next"><a href="#">Speaker Name, Company</a></small>

        </div>
    </div>
</section>

<section class="schedule amp-conf-section amp-conf-page">

    <div class="wrapper">
        <h3 id="schedule"><span>Schedule</span> <span class="schedule-tabs"><a href="#" class="active">Day 1</a><a href="#">Day 2</a></span></h3>

        {% macro render_session(item) -%}

            {% if conf.speakers[item.speaker] %}
            <span class="image">{% if conf.speakers[item.speaker].pic %}<amp-img src="{{ conf.speakers[item.speaker].pic }}" width="100" height="100"></amp-img>{% endif %}</span>
            {% endif %}

            {% if item.speakers %}
                {% for speaker in item.speakers if conf.speakers[speaker]  %}
                <span class="image multiple">{% if conf.speakers[speaker].pic %}<amp-img src="{{ conf.speakers[speaker].pic }}" width="60" height="60"></amp-img>{% endif %}</span>
                {% endfor %}
            {% endif %}

            <time data-duration="{{ item.duration }}">{{ item.time }}</time>
            <div>
                <h5 class="{{ item.type }}">{{ item.title }}</h5>
                {% if conf.speakers[item.speaker] %}
                <small><a class="speaker-link" href="#{{ item.speaker }}">{{ conf.speakers[item.speaker].name }}, {{ conf.speakers[item.speaker].company }}</a></small>
                {% endif %}
                {% if item.speakers %}
                    {% if conf.speakers[item.moderator] %}
                        <small><a class="speaker-link" href="#{{ item.moderator }}">{{ conf.speakers[item.moderator].name }}, {{ conf.speakers[item.moderator].company }} (Moderator)</a></small>
                    {% endif %}
                    {% for speaker in item.speakers %}
                        {% if conf.speakers[speaker] %}
                        <small><a class="speaker-link" href="#{{ speaker }}">{{ conf.speakers[speaker].name }}, {{ conf.speakers[speaker].company }}</a></small>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                {% if item.description %}
                <p>{{ item.description }}</p>
                {% endif %}
                {% if item.workshops %}
                    <ul class="workshops">
                    {% for workshop in item.workshops %}
                        <li>
                            <h6>{{ workshop.title }}</h6>
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    {% if item.type == "session" or item.type == "keynote" or item.type == "panel" %}
                    <div class="rating-container">
                        Rate:
                        <fieldset class="rating">
                            <input type="radio" id="star5-{{ item.title|slug }}" name="rating-{{ item.title|slug }}" value="5" /><label class = "full" for="star5-{{ item.title|slug }}" title="Awesome - 5 stars"></label>
                            <input type="radio" id="star4-{{ item.title|slug }}" name="rating-{{ item.title|slug }}" value="4" /><label class = "full" for="star4-{{ item.title|slug }}" title="Pretty good - 4 stars"></label>
                            <input type="radio" id="star3-{{ item.title|slug }}" name="rating-{{ item.title|slug }}" value="3" /><label class = "full" for="star3-{{ item.title|slug }}" title="Meh - 3 stars"></label>
                            <input type="radio" id="star2-{{ item.title|slug }}" name="rating-{{ item.title|slug }}" value="2" /><label class = "full" for="star2-{{ item.title|slug }}" title="Kinda bad - 2 stars"></label>
                            <input type="radio" id="star1-{{ item.title|slug }}" name="rating-{{ item.title|slug }}" value="1" /><label class = "full" for="star1-{{ item.title|slug }}" title="Sucks big time - 1 star"></label>
                        </fieldset>
                    </div>
                    {% endif %}
                {% endif %}
            </div>

        {%- endmacro %}

        <div class="days">

            <div class="day day-1 active">
                <ul class="schedule">
                    {% for item in conf.agenda.day_1 %}
                    <li class="{{ item.type }}">
                        {{ render_session(item) }}
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="day day-2">
                <ul class="schedule">
                    {% for item in conf.agenda.day_2 %}
                    <li class="{{ item.type }}">
                        {{ render_session(item) }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>

</section>

<section class="speakers amp-conf-section amp-conf-page">

    <div class="wrapper">
        <h3 id="speakers">Speakers</h3>

        <ul class="speakers">
            {% set sortedSpeakers = conf.speakers|sort %}
            {% for speaker in sortedSpeakers if conf.speakers[speaker].bio %}
            <li id="speaker-{{ speaker }}">
                <span class="image" data-name="{{ conf.speakers[speaker].name }}">{% if conf.speakers[speaker].pic %}<img src="{{ conf.speakers[speaker].pic }}" width="400" height="400"></amp-img>{% endif %}</span>
                <div>
                    <h4 id="{{ speaker }}">{{ conf.speakers[speaker].name }}, {{ conf.speakers[speaker].company }}</h4>
                    <p>{{ conf.speakers[speaker].bio|truncate(50)|safe }} <a href="#" class="more">more</a></p>
                    <p class="full-description">{{ conf.speakers[speaker].bio|safe }}</p>
                </div>
            </li>
            {% endfor %}
        </ul>

    </div>

</section>

<section class="location amp-conf-section amp-conf-page">
    <div class="wrapper">

        <h3 id="location">Location</h3>

        <amp-iframe width=300 height=300
            sandbox="allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"
            layout="responsive"
            frameborder="0"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3050.0600022262697!2d-74.0108920361199!3d40.72357632397405!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259f48e2e992f%3A0x7b5d67ea6c58814c!2sTribeca+360%C2%B0!5e0!3m2!1sen!2sus!4v1484082758953">
            <p placeholder>Loading..</p>
        </amp-iframe>
        <div>

            <p>Tribeca 360 (<a href="http://threesixtynyc.com/">Website</a>, <a href="https://goo.gl/maps/gmo8t5yxDot">Google Maps</a>).</p>
            <h4>Address</h4>
            <p>
                <span>10 Desbrosses St</span>
                <span>New York, NY 10013</span>
            </p>
        </div>
    </div>
</section>

<section class="faq amp-conf-section amp-conf-page">
    <div class="wrapper">
        <h3 id="faq">Frequently Asked Questions</h3>
        <dl>

        <dt>Does it cost anything?</dt>
        <dd>No - tickets are free of charge.</dd>

        <dt>Do I have to register for the live-stream?</dt>
        <dd>No! The registration is only for on-site attendees that physically attend the conference. Come back here to this site on March 7th for a link and embed of the live-stream.</dd>

        <dt>Who is the event for?</dt>
        <dd>Web developers and designers who have used AMP and want to create even better AMP experiences, who haven't used AMP and are curious or want to contribute to AMP to make it better for everyone, and the web at large.</dd>

        <dt>Does reserving a spot mean I am signed up?</dt>
        <dd>Not yet. While your chances of getting a seat are pretty good, we will confirm attendees on a case-by-case basis to ensure we attract the right audience. Note that your seat is not confirmed until you receive a confirmation code.</dd>

        <dt>When will I hear back if I have a spot?</dt>
        <dd>We'll try to confirm you within less than a week!</dd>

        <dt>What determines if I have a spot?</dt>
        <dd>The AMP Conf is a mainly developer and designer focussed event (read: the people actually creating AMP experiences). If you're non-technical, you may still apply but you'll have a slimmer chance of getting through (and you'll enjoy the conf less!).</dd>

        <dt>When will the schedule be announced?</dt>
        <dd>We'll announce a detailed schedule before end of January.</dd>
        </dl>

        <ul>
            <li><a href="/amp-conf-2017/code-of-conduct">Code of Conduct</a></li>
            <li><a href="/amp-conf-2017/accessibility">Accessibility</a></li>
            <li><a href="mailto:amp-conf-2017@google.com">Contact</a></li>
        </ul>
    </div>
</section>

<script>

    (function() {

        // main paging functionality
        var activeTab = document.querySelector('.description li:first-child');

        function showPage(pageId) {
            var pages = document.querySelectorAll('.amp-conf-page');
            for (var index = 0; index < pages.length; index++) {
                var element = pages[index];
                element.style.zIndex = element.className.indexOf(pageId) > -1 ? '1' : '0';
            }
        }

        var menuItems = document.querySelectorAll('.description li');
        for (var index = 0; index < menuItems.length; index++) {
            var element = menuItems[index];

            // Safari has an obscure block that requires double clicks on these elements..
            element.addEventListener(navigator.userAgent.indexOf('iPhone') > -1? 'touchend' : 'click', function() {

                showPage(this.dataset.page);

                activeTab.classList.remove('active');
                this.classList.add('active');
                activeTab = this;

                location.hash = '#' + this.dataset.page;
                return false;
            }, false);

            if(location.hash === '#' + element.dataset.page) {
                showPage(element.dataset.page);
                activeTab.classList.remove('active');
                element.classList.add('active');
                activeTab = element;
            }
        }

        // more links to expand speaker descriptions
        var moreLinks = document.querySelectorAll('ul.speakers a.more');
        for (var index = 0; index < moreLinks.length; index++) {
            var element = moreLinks[index];
            element.addEventListener('click', function(e) {
                this.parentNode.innerHTML = this.parentNode.nextElementSibling.innerHTML;
                e.preventDefault();
            }, false);
        }

        // schedule tabs
        var scheduleTabs = document.querySelectorAll('span.schedule-tabs a');
        var day1 = document.querySelector('.day-1');
        var day2 = document.querySelector('.day-2');
        for (var index = 0; index < scheduleTabs.length; index++) {
            var element = scheduleTabs[index];
            element.addEventListener('click', function(e) {

                this.classList.add('active');

                if(this.parentNode.children[0] === this) { // Day 1
                    this.parentNode.children[1].classList.remove('active');
                    day1.classList.add('active');
                    day2.classList.remove('active');
                } else { // Day 2
                    this.parentNode.children[0].classList.remove('active');
                    day2.classList.add('active');
                    day1.classList.remove('active');
                }
                e.preventDefault();
            }, false);
        }

        // Set current live-streaming agenda item to active
        var maybeMarkTalkAsLive = function(element, dayIndex, nextElement) {
            var hour = element.innerHTML.substr(0,2);
            var minute = element.innerHTML.substr(2);
            var duration = parseInt(element.dataset.duration);

            var startTime = new Date('2017-03-0' + (7 + dayIndex) + 'T' + hour + ':' + minute + ':00');
            startTime.setTime( startTime.getTime() + 5*60*60*1000 ); // shifts it to NYC time
            var endTime = new Date();
            endTime.setTime(startTime.getTime() + duration*60*1000);
            var nowTime = new Date();
            //var nowTime = new Date('2017-03-07T15:00:00'); // Test time

            if(nowTime.getTime() >= startTime.getTime() && nowTime.getTime() < endTime.getTime()) {

                // Make sure we switch to the right day tab
                scheduleTabs[dayIndex].click();

                // it's happening now! Mark it as active
                element.parentNode.classList.add('active');

                let blark = element.parentNode.offsetTop - (window.innerHeight / 2) + (element.parentNode.offsetHeight / 2);
                setTimeout(() => {
                    document.querySelector('section.schedule').scrollTop = blark;
                }, 0); // WHYYYYYYYY

                // Copy over to live tab
                var minutesNow = document.getElementById('livestream-now-minutes');
                var titleNow = document.getElementById('livestream-now-title');
                var speakerNow = document.getElementById('livestream-now-speaker');
                titleNow.innerHTML = element.parentNode.getElementsByTagName('h5')[0].innerHTML;
                speakerNow.innerHTML = element.parentNode.getElementsByTagName('small')[0] ? element.parentNode.getElementsByTagName('small')[0].innerHTML : '';
                minutesNow.innerHTML = ((endTime.getTime() - nowTime.getTime()) / (1000 * 60));

                if(nextElement) {
                    var titleNext = document.getElementById('livestream-next-title');
                    var speakerNext = document.getElementById('livestream-next-speaker');
                    titleNext.innerHTML = nextElement.parentNode.getElementsByTagName('h5')[0].innerHTML;
                    speakerNext.innerHTML = nextElement.parentNode.getElementsByTagName('small')[0] ? nextElement.parentNode.getElementsByTagName('small')[0].innerHTML : '';
                }

                // If there's a previous current one, clear it..
                if(currentLive) {
                    currentLive.classList.remove('active');
                }

                currentLive = element.parentNode;

            }
        };

        var currentLive = null;
        var trackLiveStatus = function() {

            var foundLive = false;

            var day1talks = day1.querySelectorAll('li time');
            for (var index = 0; index < day1talks.length; index++) {
                var element = day1talks[index];
                if(maybeMarkTalkAsLive(element, 0, day1talks[index+1])) {
                    foundLive = true;
                };
            }

            var day2talks = day2.querySelectorAll('li time');
            for (var index = 0; index < day2talks.length; index++) {
                var element = day2talks[index];
                if(maybeMarkTalkAsLive(element, 1, day2talks[index+1])) {
                    foundLive = true;
                };
            }

            if(!foundLive) {
                // If there's a previous current one, clear it..
                if(currentLive) {
                    currentLive.classList.remove('active');
                }
                var minutesNow = document.getElementById('livestream-now-minutes');
                var titleNow = document.getElementById('livestream-now-title');
                var speakerNow = document.getElementById('livestream-now-speaker');
                var titleNext = document.getElementById('livestream-next-title');
                var speakerNext = document.getElementById('livestream-next-speaker');
                minutesNow.innerHTML = 0;
                titleNow.innerHTML = 'Nothing';
                speakerNow.innerHTML = '';
                titleNext.innerHTML = '';
                speakerNext.innerHTML = '';
            }

        }

        trackLiveStatus();
        setInterval(trackLiveStatus, 60 * 1000);

        // speaker link click functionality
        document.body.addEventListener('click', event => {
            if(event.target && event.target.nodeName === "A" && event.target.className === "speaker-link") {
                console.log(event.target);
                event.preventDefault();
                document.querySelector('li[data-page=speakers]').click();
                var speaker = document.getElementById('speaker-' + event.target.getAttribute('href').substr(1));
                var speakerSection = document.querySelector('section.speakers');

                speakerSection.scrollTop = speaker.offsetTop - (window.innerHeight / 2) + (speaker.offsetHeight / 2);

            }
        }, false);


    })();
</script>

<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-database.js"></script>

<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyBJSaIXFs7ep7Hcw-YeGoKfbMzoOVKuIgE",
        authDomain: "ampproject-b5f4c.firebaseapp.com",
        databaseURL: "https://ampproject-b5f4c.firebaseio.com",
        storageBucket: "ampproject-b5f4c.appspot.com",
        messagingSenderId: "93225420144"
    };

    firebase.initializeApp(config);

    // Get a reference to the database service
    var database = firebase.database();

    // Hook up ratings
    function generateUUID () { // Public Domain/MIT
        var d = new Date().getTime();
        if (typeof performance !== 'undefined' && typeof performance.now === 'function'){
            d += performance.now(); //use high-precision timer if available
        }
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = (d + Math.random() * 16) % 16 | 0;
            d = Math.floor(d / 16);
            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
        });
    }

    var serializeRatings = function() {

        var ratings = {};
        var checkedRadios = document.querySelectorAll('fieldset.rating input[type=radio]:checked');
        for (var index = 0; index < checkedRadios.length; index++) {
            var checked = checkedRadios[index];
            ratings[checked.getAttribute('name').substr(7)] = checked.value;
        }

        // store ratings in localStorage
        localStorage.ampConfRatings = JSON.stringify(ratings);

        // store ratings in Firebase
        database.ref('ratings/' + localStorage.ampConfUUID).set(ratings);

    };

    var restoreRatings = function() {

        // generate unique id for this user if not set yet
        if(!localStorage.ampConfUUID) {
            localStorage.ampConfUUID = generateUUID();
        }

        var ratings = localStorage.ampConfRatings;
        if(!ratings) {
            return;
        }

        ratings = JSON.parse(ratings);
        for(var sessionSlug in ratings) {
            document.getElementById('star' + ratings[sessionSlug] + '-' + sessionSlug).checked = true;
        }

    };

    restoreRatings();

    document.addEventListener('click', (event) => {
        if(event.target.nodeName === "INPUT" && event.target.getAttribute('type') === "radio") {
            serializeRatings();
        }
    });

</script>

</body>
</html>