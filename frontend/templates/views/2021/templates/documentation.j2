{% extends '/views/2021/base.html' %}

{% block main %}
<main>
  <amp-animation  id="showSidebarToggleAnim" layout="nodisplay">
    <script type="application/json">
      {
        "selector": "#sidebar-toggle",
        "duration": "250ms",
        "fill": "both",
        "direction": "alternate",
        "keyframes": { "opacity": 1 }
      }
    </script>
  </amp-animation>
  <amp-animation  id="hideSidebarToggleAnim" layout="nodisplay">
    <script type="application/json">
      {
        "selector": "#sidebar-toggle",
        "duration": "250ms",
        "fill": "both",
        "direction": "alternate",
        "keyframes": { "opacity": 0 }
      }
    </script>
  </amp-animation>

  {% include 'views/2021/partials/sidebar.j2' %}

  <div class="ap-content">
    <div class="ap-content-sidebar-observer">
      <amp-position-observer on="exit:showSidebarToggleAnim.start; enter:hideSidebarToggleAnim.start"
          intersection-ratio="0.01"
          layout="nodisplay">
      </amp-position-observer>
    </div>
    {{ doc.html|render|safe }}
  </section>
</main>
{% endblock %}
