{% extends '/views/2021/base.html' %}

{% block main %}
<main id="main" class="--sidebaropen">
  <amp-animation  id="sidebarToggleAnim" layout="nodisplay">
    <script type="application/json">
      {
        "duration": "750ms",
        "fill": "both",
        "animations": [
          {
            "selector": "#sidebar-toggle-label",
            "keyframes": { "opacity": "var(--value)" }
          },
          {
            "selector": "#sidebar-toggle-background",
            "delay": "100ms",
            "duration": "650ms",
            "keyframes": { "transform": "scaleX(var(--value))" }
          }
        ]
      }
    </script>
  </amp-animation>

  <div class="ap-container">
    {% include 'views/2021/partials/sidebar.j2' %}

    <div class="ap-content">
      <div class="ap-content-sidebar-observer">
        <amp-position-observer on="exit:sidebarToggleAnim.start(--value=1); enter:sidebarToggleAnim.start(--value=0)"
            intersection-ratio="0.01"
            layout="nodisplay">
        </amp-position-observer>
      </div>
      {% include 'views/2021/partials/sidebar-toggle.j2' %}
      {{ doc.html|render|safe }}
    </div>
  </div>
</main>
{% endblock %}
